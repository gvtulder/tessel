@use "sass:color";

$maintint: hsl(42deg, 5%, 50%);
$green: hsl(80deg, 64%, 50%);
$blue: hsl(214deg, 64%, 50%);

:root {
  // main backgrounds
  --main-bg-color: #{color.change($maintint, $lightness: 87%)};
  --panel-bg-color: #{color.change($maintint, $lightness: 70%)};
  --dropout-bg-color: #{color.change($maintint, $lightness: 95%)};

  // COMPONENTS

  // toggle colors
  --toggle-icon-color: rgba(0, 0, 0, 35%);
  --toggle-fg-enabled-color: #{color.change($green, $lightness: 32%)};
  --toggle-bg-enabled-color: #{color.change($green, $lightness: 85%)};
  --toggle-fg-disabled-color: rgba(0, 0, 0, 25%);
  --toggle-bg-disabled-color: rgba(0, 0, 0, 8%);

  // button colors
  --button-fg-color: rgba(0, 0, 0, 35%);
  --button-bg-color: rgba(0, 0, 0, 8%);
  --button-bg-pressed-color: rgba(0, 0, 0, 15%);
  --button-bg-hover-color: rgba(0, 0, 0, 25%);
  --button-bg-selected-color: rgba(0, 0, 0, 70%);

  // large play button in the setup screen
  --setup-play-button-bg-color: #{color.change($green, $lightness: 32%)};
  --setup-play-button-bg-disabled-color: rgba(0, 0, 0, 10%);
  --setup-play-button-fg-color: #{color.change($green, $lightness: 95%)};
  --setup-play-button-fg-disabled-color: rgba(255, 255, 255, 30%);

  // home button in the play screen
  --home-button-bg-color: #{color.change($blue, $lightness: 32%)};
  --home-button-fg-color: #{color.change($blue, $lightness: 97%)};
  --home-button-fg-hover-color: #{color.change($blue, $lightness: 97%)};

  // SETUP SCREEN

  // settings menu options
  --settings-option-panel-bg-color: #{color.change($maintint, $lightness: 80%)};
  --settings-option-panel-bg-active-color: #{color.change(
      $maintint,
      $lightness: 93%
    )};
  --settings-option-panel-bg-hover-color: #{color.change(
      $maintint,
      $lightness: 87%
    )};
  --settings-option-panel-border-active-color: #66f;

  // warning symbol for invalid grid in setup menu
  --invalid-grid-warning-color: #e06300;

  // GAME SCREEN

  // score display in the tile stack
  --score-display-fg-color: #{color.change($green, $lightness: 32%)};
  --score-display-bg-color: #{color.change($green, $lightness: 85%)};

  // tile counter
  --tile-counter-text-color: hsl(0deg, 0%, 47%);
  --tile-counter-border-color: hsl(0deg, 0%, 60%);

  // placeholder tile colors
  --placeholder-fill-color: #{hsla(0deg, 0%, 80%, 0.5)};
  --placeholder-stroke-color: #{hsl(0deg, 0%, 80%)};

  // colors for ScoreOverlayDisplay_Cutout
  // - background of the outline, should match screen background
  --cutout-outline-bg-color: var(--main-bg-color);
  // - colored outline around the shape
  --cutout-outline-fg-color: hsl(80deg, 61%, 50%);
  // - points circle
  --cutout-circle-points-fill-color: hsl(80deg, 61%, 85%);
  --cutout-circle-points-stroke-color: hsl(80deg, 61%, 32%);

  // MAIN SCREEN

  // main screen footer
  --footer-version-color: #aaa;
  --footer-copyright-color: #777;
  --footer-link-hover-color: #000;

  // logo on main screen
  --logo-fill-color: rgba(0, 0, 0, 35%);
}

// safe areas
:root {
  --safe-area-max-inset-top: env(
    safe-area-max-inset-top,
    env(safe-area-inset-top, 36px)
  );
  --safe-area-max-inset-right: env(
    safe-area-max-inset-right,
    env(safe-area-inset-right, 36px)
  );
  --safe-area-max-inset-bottom: env(
    safe-area-max-inset-bottom,
    env(safe-area-inset-bottom, 36px)
  );
  --safe-area-max-inset-left: env(
    safe-area-max-inset-left,
    env(safe-area-inset-left, 36px)
  );
}

// svg scale factor (see corresponding parameter in the TS source)
$svg-scale: 100;

// size of the buttons (height and width including padding)
$button-scale: min(16vw, 15vh, max(5vw, 7vh, 40px));

// space around the button
$button-margin-width: calc(0.6 * $button-scale);
$button-margin-height: calc(0.6 * $button-scale);

// safe area inset margins
$inset-top: var(--safe-area-max-inset-top);
$inset-right: var(--safe-area-max-inset-right);
// at the bottom we'll make some extra space to safely drag the tiles
$inset-bottom: calc(1.5 * var(--safe-area-max-inset-bottom));
$inset-left: var(--safe-area-max-inset-left);

// margin to keep the stack away from the edge
$stack-margin-top: 0px;
$stack-margin-right: 0px; // calc(max(15vw - 20vh, 0px));
$stack-margin-bottom: 0px; // calc(max(4vh - 4vw, 0px));
$stack-margin-left: 0px;

// width/height of the tile stack
$stack-width: calc($button-scale + 2 * $button-margin-width);
$stack-height: max(20vw, 40px);

// button position relative to the page
$button-top: max(calc($button-margin-height + $stack-margin-top), $inset-top);
$button-right: max(
  calc($button-margin-width + $stack-margin-right),
  $inset-right
);
$button-bottom: max(
  calc($button-margin-height + $stack-margin-bottom),
  $inset-bottom
);
$button-left: max(calc($button-margin-width + $stack-margin-left), $inset-left);

// debugging CSS: add div elements to show safe area
.safe-inset-top,
.safe-inset-bottom {
  background: #f00a;
  z-index: 1000;
  position: absolute;
  left: $inset-left;
  width: calc(100vw - $inset-left - $inset-right);
  box-sizing: border-box;
}
.safe-inset-top {
  top: 0;
  height: $inset-top;
}
.safe-inset-bottom {
  bottom: 0;
  height: $inset-bottom;
}
